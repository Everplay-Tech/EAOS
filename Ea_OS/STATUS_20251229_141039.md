# Status / Assessment - 2025-12-29 14:10:39

## Update (2025-12-30)
- `docs/muscle-contract-v6.md` tag line corrected to ChaCha20-Poly1305.
- `ARCHITECTURE.md` and `architectureandmore.md` aligned to v6 crypto.
- `referee/src/crypto.rs` removed; loader uses `muscle-contract`.

## Scope
- Reviewed HANDOFF_v3.md and repo structure.
- Ran targeted tests where feasible; recorded failures.
- Documented decisions with rationale.

## Current state snapshot
- Muscle contract + compiler: aligned to v6 contract; tests pass.
- Referee loader: uses contract v6; UEFI/no_std builds not validated on this host.
- Nucleus + preloader: source exists; preloader size constraint not satisfied (embedded 8256B blob vs 2KiB target).
- Ledger + symbiote: core logic exists; transport layer build currently broken against dependency versions.
- Muscle-ea organelles: pathfinder and dependent muscles do not compile due to missing deps + wasmtime API drift.

## Tests run
- `cargo test -p muscle-contract -p muscle-compiler` -> PASS (3 + 26 tests). Warnings remain in muscle-compiler.
- `cargo test -p muscle-contract -p muscle-compiler -p muscle-ea-core -p muscle-ea-pathfinder -p muscle-ea-neurowasm -p muscle-ea-axonwasm -p muscle-ea-dendritewasm` -> FAIL at muscle-ea-pathfinder compile errors.
- `cargo test -p muscle-contract -p muscle-compiler -p muscle-ea-core -p muscle-ea-pathfinder -p muscle-ea-neurowasm -p muscle-ea-axonwasm -p muscle-ea-dendritewasm -p ea-lattice-ledger -p ledger-core -p ledger-spec -p ea-symbiote` -> FAIL at ea-symbiote integration test borrow error.
- `cargo test -p muscle-contract -p muscle-compiler -p muscle-ea-core -p muscle-ea-pathfinder -p muscle-ea-neurowasm -p muscle-ea-axonwasm -p muscle-ea-dendritewasm -p ea-lattice-ledger -p ledger-core -p ledger-spec -p ledger-transport -p ledgerd -p ledger-arda -p ledger-ui-shell -p ea-symbiote` -> FAIL at ledger-transport compile errors.

## High-impact discrepancies / risks
- docs/muscle-contract-v6.md: resolved (tag line corrected to ChaCha20-Poly1305).
- ARCHITECTURE.md and architectureandmore.md: resolved (aligned to v6 crypto).
- referee/src/crypto.rs: resolved (removed; loader uses muscle-contract).
- muscles/preloader/src/lib.rs embeds 8256B blob in a 2KiB loader; size constraint impossible as written.
- muscle-ea-core/Cargo.toml pulls heavy deps (wasmtime, aes-gcm) not used; review dependency hygiene.

## Decisions recorded
- Crypto: use ChaCha20-Poly1305 now for dependency compatibility and current workspace; keep 24-byte nonce field to allow future XChaCha upgrade without changing blob layout. Revisit once xchacha crate/version fits with zeroize/aead stack.
- Dev hardware path: target AArch64 + UEFI and validate via QEMU virt on macOS; keeps path open for Raspberry Pi 5 / other ARM64 boards and future custom hardware.
- LLM embedding: keep LLM profile optional in manifest (payload offsets), focus on small local model (phi2-class) later; no runtime integration yet.

## Next validation items
- Fix ledger-transport compilation: tokio-stream sync feature, rustls 0.23 API updates, quinn API updates, add http crate in Cargo.toml.
- Fix ea-symbiote integration test borrow issue (avoid borrowing from temporary hash).
- Add missing deps + update wasmtime APIs in muscle-ea-pathfinder; remove unsafe or permit it.
- Reconcile docs with v6 contract and crypto change.
- Build/test referee + nucleus with UEFI target toolchains; verify preloader size constraints.
